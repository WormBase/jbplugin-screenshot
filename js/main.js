//>>built
require({cache:{"ScreenShotPlugin/View/Dialog/ScreenShotDialog":function(){define("ScreenShotPlugin/View/Dialog/ScreenShotDialog","dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/_base/array dijit/focus dijit/form/CheckBox dijit/form/NumberSpinner dijit/form/RadioButton dijit/layout/ContentPane dijit/layout/AccordionContainer JBrowse/View/Dialog/WithActionBar dojo/on dijit/form/Button JBrowse/Model/Location ScreenShotPlugin/Util".split(" "),function(s,g,d,c,k,f,u,m,n,p,l,q,t,x,a){return s(l,
{title:"Take screenshot",autofocus:!1,constructor:function(b){this.browser=b.browser;this.parameters=this._getInitialParameters();this.requestUrl=b.requestUrl;this.setCallback=b.setCallback||function(){};this.cancelCallback=b.cancelCallback||function(){};this.vTracks=this.browser.view.visibleTracks();this.trackParameters=this._getTrackParameters()},_fillActionBar:function(b){dojo.addClass(b,"screenshot-dialog-actionbar");(new t({label:"Render",onClick:dojo.hitch(this,function(){var b=this.parameters.view;
b.methylation=this.parameters.methylation;b.zoom=this.parameters.output.zoom;b=this._getPhantomJSUrl({general:b,tracks:this.trackParameters},this.parameters.output);window.open(b);this.setCallback&&this.setCallback()})})).placeAt(b);(new t({label:"Cancel",onClick:dojo.hitch(this,function(){this.cancelCallback&&this.cancelCallback();this.hide()})})).placeAt(b)},show:function(b){dojo.addClass(this.domNode,"screenshot-dialog");var a=d.create("div",{className:"screenshot-dialog-pane",id:"screenshot-dialog-pane-left"}),
e=new n({className:"screenshot-dialog-pane-sub",id:"screenshot-dialog-pane-left-top",title:"General configuration options"});this._paneGen(e.containerNode);e.placeAt(a);e=new n({className:"screenshot-dialog-pane-sub",id:"screenshot-dialog-pane-left-bottom",title:"Output configuration options"});this._paneOut(e.containerNode);e.placeAt(a);e=d.create("div",{className:"screenshot-dialog-pane",id:"screenshot-dialog-pane-right",className:"screenshot-dialog-pane"});this._paneTracks(e);var c=d.create("div",
{"class":"screenshot-dialog-pane-bottom-warning",innerHTML:"Local configuration changes will be ignored. Default configuration will be used unless specified in this dialog.\x3cbr\x3eRendering will open a new window."});this.set("content",[a,e,c]);this.inherited(arguments)},_paneGen:function(b){var a=this.parameters.view,e;d.create("h2",{innerHTML:"General configuration options"},b);b=d.create("table",{"class":"screenshot-dialog-opt-table"},b);for(e in a){var c=a[e],h=d.create("tr",{id:"screenshot-dialog-row-"+
e},b);d.create("td",{innerHTML:"labels"===e?"":c.title,"class":"screenshot-dialog-pane-label"},h);h=d.create("td",{"class":"screenshot-dialog-pane-input"},h);c="trackSpacing"===e?new u({id:"screenshot-dialog-"+e+"-spinner",value:c.value,_props:e,constraints:{min:0,max:40},smallDelta:5,intermediateChanges:!0,style:"width:50px;"}):"labels"===e?null:new f({id:"screenshot-dialog-opt-box-"+e,_prop:e,checked:c.value});null!==c&&(c.onClick=dojo.hitch(this,"_setParameter",c),c.placeAt(h,"first"))}if(this.browser.plugins.hasOwnProperty("MethylationPlugin")){h=
d.create("tr",{id:"screenshot-dialog-row-methyl"},b);d.create("td",{innerHTML:"Methylation","class":"screenshot-dialog-pane-label",colspan:2},h);var a=d.create("tr",{id:"screenshot-dialog-row-methyl-boxes"},b),a=d.create("td",{colspan:2},a),r;for(r in this.parameters.methylation)e=new f({id:"screenshot-dialog-methyl-"+r,"class":r+"-checkbox",_prop:r,checked:this.parameters.methylation[r]}),e.onClick=dojo.hitch(this,"_setMethylation",e),d.create("span",{innerHTML:r,"class":"screenshot-dialog-opt-span"},
a),a.appendChild(e.domNode)}},_paneOut:function(b){var a=this;d.create("h2",{innerHTML:"Output configuration options"},b);b=d.create("table",{"class":"screenshot-dialog-opt-table"},b);var e,f=a.parameters.output;for(e in f){var h=f[e];if("format"===e){var r=d.create("tr",{id:"screenshot-dialog-row-"+e,colspan:2},b);d.create("td",{innerHTML:h.title,"class":"screenshot-dialog-pane-label"},r);var h=d.create("tr",{"class":"screenshot-dialog-pane-input"},b),k=d.create("td",{colspan:2},h),q={PNG:"transparent background",
JPG:"white background",PDF:"contains svg-like objects"};c.forEach(["PNG","JPG"],function(b){var v=new m({id:"screenshot-dialog-output-"+b,checked:b===a.parameters.output.format.value,value:b,_prop:e});v.onClick=dojo.hitch(a,"_setParameter",v);d.create("span",{innerHTML:b,className:"screenshot-dialog-opt-span",title:q[b]},k);k.appendChild(v.domNode)})}else h=f[e],r=d.create("tr",{id:"screenshot-dialog-row-"+e},b),d.create("td",{innerHTML:h.title,"class":"screenshot-dialog-pane-label"},r),r=d.create("td",
{"class":"screenshot-dialog-pane-input"},r),h=new u({id:"screenshot-dialog-"+e+"-spinner",value:h.value,_prop:e,constraints:{min:h.min,max:h.max},smallDelta:h.delta,intermediateChanges:!0,style:"width:75px;"}),h.onChange=dojo.hitch(a,"_setParameter",h),h.placeAt(r,"first")}},_paneTracks:function(b){var a=this,e=["left","center","right","none"];d.create("h2",{innerHTML:"Track-specific configuration options"},b);var f=new p({id:"screenshot-dialog-pane-accordian"}),h,k,q,l,g;c.forEach(a.vTracks,function(b){h=
b.config.label;k=a.trackParameters[h];q=new n({title:void 0===k.key?h:k.key,id:"screenshot-dialog-track-"+h});b=q.containerNode;if(!1===k.opts)q.set("content","No available options");else for(l in b=d.create("table",{"class":"screenshot-dialog-opt-table"},b),k)if(g=k[l],"ypos"===l){if(!1!==k.ypos){var w=d.create("tr",{id:"screenshot-dialog-row-"+h+"-ypos"},b);d.create("td",{innerHTML:"Y-scale position","class":"screenshot-dialog-pane-label"},w);c.forEach(e,function(b){var v=new m({name:"yscale-"+
h,checked:b===k.ypos,id:"screenshot-dialog-radio-"+h+"-"+b,value:b,_label:h,_prop:"ypos"});v.onClick=dojo.hitch(a,"_setTrackParameter",v);var e=d.create("td",{"class":"screenshot-dialog-td-button"},w);v.placeAt(e,"first");d.create("label",{"for":"yscale-dialog-radio-"+h+"-"+b,innerHTML:b},e)})}}else if(g.hasOwnProperty("value")){w=d.create("tr",{id:"screenshot-dialog-row-"+h+"-"+l},b);d.create("td",{innerHTML:g.title,"class":"screenshot-dialog-pane-label"},w);var z=new u({id:"screenshot-dialog-spinner-"+
h+"-"+l,value:g.value,_prop:l,_label:h,smallDelta:g.delta,intermediateChanges:!0,style:"width:60px;"});z.onChange=dojo.hitch(a,"_setTrackParameter",z);var t=d.create("td",{"class":"screenshot-dialog-pane-input",colspan:4},w);z.placeAt(t,"first")}f.addChild(q)});f.placeAt(b);f.startup()},hide:function(){this.inherited(arguments);window.setTimeout(dojo.hitch(this,"destroyRecursive"),500)},_setMethylation:function(b){this.parameters.methylation.hasOwnProperty(b._prop)&&(this.parameters.methylation[b._prop]=
b.checked)},_setParameter:function(b){var a=b._prop;"format"===a?b.checked&&this.parameters.output.hasOwnProperty(a)&&(this.parameters.output[a].value=b.value):b.hasOwnProperty("checked")?this.parameters.view.hasOwnProperty(a)&&(this.parameters.view[a].value=!!b.checked):this.parameters.view.hasOwnProperty(a)?this.parameters.view[a].value=b.value:this.parameters.output.hasOwnProperty(a)&&(this.parameters.output[a].value=b.value)},_setTrackParameter:function(b){var a=b._label,e=b._prop;this.trackParameters.hasOwnProperty(a)?
this.trackParameters[a].hasOwnProperty(e)&&(this.trackParameters[a][e].value=b.value):console.warn("Error: no track labeled "+a)},_getInitialParameters:function(){var b=this.browser.config,a={value:b.highResolutionMode,title:"Zoom factor"};"number"!==typeof a.value&&(a.value=1);var e={value:20,title:"Track spacing"};void 0!==b.view&&void 0!==b.view.trackPadding&&(e.value=b.view.trackPadding);var c={value:b.show_overview,title:"Show location overview"},d={value:b.show_tracklist,title:"Show track list"},
f={value:b.show_nav,title:"Show navigation bar"},b={value:b.show_menu,title:"Show menu bar"};a.min=0;a.max=10;a.delta=1;return{view:{trackSpacing:e,locOver:c,trackList:d,nav:f,menu:b,labels:{value:!0,title:"Show track labels"}},methylation:{CG:!0,CHG:!0,CHH:!0},output:{format:{value:"JPG",title:"Output format"},zoom:a,quality:{value:70,title:"Render quality",min:0,max:100,delta:10},width:{value:3300,title:"Width (px)",min:100,max:1E4,delta:100},height:{value:2400,title:"Height (px)",min:100,max:1E4,
delta:100}}}},_getTrackParameters:function(){var b=this,a={};c.forEach(this.vTracks,function(e,c){a[e.config.label]=b._handleTrackTypeParameters(c,e.config.type,e.config)});return a},_handleTrackTypeParameters:function(a,c,e){a={key:e.key,trackNum:a};if(/\b(Sequence)/.test(c))return g.mixin(a,{opts:!1}),a;/\b(MethylPlot)/.test(c)||/\b(MethylPlot)/.test(c)?g.mixin(a,{ypos:{title:"Y-scale position",value:e.yScalePosition},height:{title:"Track height",value:e.style.height,delta:10},min:{title:"Min. score",
value:e.min_score,delta:0.1},max:{title:"Max. score",value:e.max_score,delta:0.1},quant:!0}):/\b(XYPlot)/.test(c)||/\b(XYDensity)/.test(c)?g.mixin(a,{ypos:{title:"Y-scale position",value:e.yScalePosition},height:{title:"Track height",value:e.style.height,delta:10},min:{title:"Min. score",value:e.min_score,delta:10},max:{title:"Max. score",value:e.max_score,delta:10},quant:!0}):g.mixin(a,{height:{title:"Track height",value:e.maxHeight,delta:10},ypos:!1});void 0!==e.histograms&&g.mixin(a,{ypos:{title:"Y-scale position",
value:e.yScalePosition},min:{title:"Min. score",value:e.histograms.min,delta:10},max:{title:"Max. score",value:e.histograms.max,delta:10},quant:!1});return a},_getPhantomJSUrl:function(b,c){var e=this.browser.makeCurrentViewURL(),d=a.encode(b),e=(e+("\x26screenshot\x3d"+d)).replace(/\u0026/g,"%26");c.url=e;e=a.encodePhantomJSSettings(c);return this.requestUrl+e}})})},"dijit/layout/AccordionContainer":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/keys dojo/_base/lang dojo/sniff dojo/topic ../focus ../_base/manager dojo/ready ../_Widget ../_Container ../_TemplatedMixin ../_CssStateMixin ./StackContainer ./ContentPane dojo/text!./templates/AccordionButton.html ../a11yclick".split(" "),
function(s,g,d,c,k,f,u,m,n,p,l,q,t,x,a,b,A,e,B,h,r,D,C){t=d("dijit.layout._AccordionButton",[A,B,h],{templateString:C,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var a=this.id.replace(" ","_");f.set(this.titleTextNode,
"id",a+"_title");this.focusNode.setAttribute("aria-labelledby",f.get(this.titleTextNode,"id"));k.setSelectable(this.domNode,!1)},getTitleHeight:function(){return n.getMarginSize(this.domNode).h},_onTitleClick:function(){this.getParent().selectChild(this.contentWidget,!0);x.focus(this.focusNode)},_onTitleKeyDown:function(a){return this.getParent()._onKeyDown(a,this.contentWidget)},_setSelectedAttr:function(a){this._set("selected",a);this.focusNode.setAttribute("aria-expanded",a?"true":"false");this.focusNode.setAttribute("aria-selected",
a?"true":"false");this.focusNode.setAttribute("tabIndex",a?"0":"-1")}});q("dojo-bidi")&&t.extend({_setLabelAttr:function(a){this._set("label",a);f.set(this.titleTextNode,"innerHTML",a);this.applyTextDir(this.titleTextNode)},_setTitleAttr:function(a){this._set("title",a);f.set(this.titleTextNode,"title",a);this.applyTextDir(this.titleTextNode)}});var y=d("dijit.layout._AccordionInnerContainer"+(q("dojo-bidi")?"_NoBidi":""),[A,h],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:!0,buildRendering:function(){this.domNode=
m.place("\x3cdiv class\x3d'"+this.baseClass+"' role\x3d'presentation'\x3e",this.contentWidget.domNode,"after");var a=this.contentWidget,b=l.isString(this.buttonWidget)?l.getObject(this.buttonWidget):this.buttonWidget;this.button=a._buttonWidget=(new b({contentWidget:a,label:a.title,title:a.tooltip,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,iconClass:a.iconClass,id:a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=m.place("\x3cdiv class\x3d'dijitAccordionChildWrapper' role\x3d'tabpanel' style\x3d'display:none'\x3e",
this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);m.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var a=this.button,b=this.contentWidget;this._contentWidgetWatches=[b.watch("title",l.hitch(this,function(b,e,c){a.set("label",c)})),b.watch("tooltip",l.hitch(this,function(b,e,c){a.set("title",c)})),b.watch("iconClass",l.hitch(this,function(b,e,c){a.set("iconClass",c)}))]},_setSelectedAttr:function(a){this._set("selected",
a);this.button.set("selected",a);if(a&&(a=this.contentWidget,a.onSelected))a.onSelected()},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();g.forEach(this._contentWidgetWatches||[],function(a){a.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(a){this.contentWidget.destroyRecursive(a)}});q("dojo-bidi")&&(y=d("dijit.layout._AccordionInnerContainer",y,
{postCreate:function(){this.inherited(arguments);var a=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(b,c,e){a.set("textDir",e)}))}}));d=d("dijit.layout.AccordionContainer",r,{duration:a.defaultDuration,buttonWidget:t,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){this._started||(this.inherited(arguments),this.selectedChildWidget&&
this.selectedChildWidget._wrapperWidget.set("selected",!0))},layout:function(){var a=this.selectedChildWidget;if(a){var b=a._wrapperWidget.domNode,e=n.getMarginExtents(b),b=n.getPadBorderExtents(b),c=a._wrapperWidget.containerNode,d=n.getMarginExtents(c),c=n.getPadBorderExtents(c),f=this._contentBox,k=0;g.forEach(this.getChildren(),function(b){b!=a&&(k+=n.getMarginSize(b._wrapperWidget.domNode).h)});this._verticalSpace=f.h-k-e.h-b.h-d.h-c.h-a._buttonWidget.getTitleHeight();this._containerContentBox=
{h:this._verticalSpace,w:this._contentBox.w-e.w-b.w-d.w-c.w};a&&a.resize(this._containerContentBox)}},_setupChild:function(a){a._wrapperWidget=y({contentWidget:a,buttonWidget:this.buttonWidget,id:a.id+"_wrapper",dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,parent:this});this.inherited(arguments);m.place(a.domNode,a._wrapper,"replace")},removeChild:function(a){a._wrapperWidget&&(m.place(a.domNode,a._wrapperWidget.domNode,"after"),a._wrapperWidget.destroy(),delete a._wrapperWidget);u.remove(a.domNode,
"dijitHidden");this.inherited(arguments)},getChildren:function(){return g.map(this.inherited(arguments),function(a){return"dijit.layout._AccordionInnerContainer"==a.declaredClass?a.contentWidget:a},this)},destroy:function(){this._animation&&this._animation.stop();g.forEach(this.getChildren(),function(a){a._wrapperWidget?a._wrapperWidget.destroy():a.destroyRecursive()});this.inherited(arguments)},_showChild:function(a){a._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},
_hideChild:function(a){a._wrapperWidget.containerNode.style.display="none";this.inherited(arguments)},_transition:function(a,b,e){8>q("ie")&&(e=!1);this._animation&&(this._animation.stop(!0),delete this._animation);var d=this;if(a){a._wrapperWidget.set("selected",!0);var f=this._showChild(a);this.doLayout&&a.resize&&a.resize(this._containerContentBox)}b&&(b._wrapperWidget.set("selected",!1),e||this._hideChild(b));if(e){var k=a._wrapperWidget.containerNode,h=b._wrapperWidget.containerNode;e=a._wrapperWidget.containerNode;
a=n.getMarginExtents(e);e=n.getPadBorderExtents(e);var l=a.h+e.h;h.style.height=d._verticalSpace-l+"px";this._animation=new c.Animation({node:k,duration:this.duration,curve:[1,this._verticalSpace-l-1],onAnimate:function(a){a=Math.floor(a);k.style.height=a+"px";h.style.height=d._verticalSpace-l-a+"px"},onEnd:function(){delete d._animation;k.style.height="auto";b._wrapperWidget.containerNode.style.display="none";h.style.height="auto";d._hideChild(b)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return f},
_onKeyDown:function(a,b){if(!this.disabled&&!(a.altKey||!b&&!a.ctrlKey)){var e=a.keyCode;if(b&&(e==p.LEFT_ARROW||e==p.UP_ARROW)||a.ctrlKey&&e==p.PAGE_UP)this._adjacent(!1)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault();else if(b&&(e==p.RIGHT_ARROW||e==p.DOWN_ARROW)||a.ctrlKey&&(e==p.PAGE_DOWN||e==p.TAB))this._adjacent(!0)._buttonWidget._onTitleClick(),a.stopPropagation(),a.preventDefault()}}});q("dijit-legacy-requires")&&b(0,function(){s(["dijit/layout/AccordionPane"])});d._InnerContainer=
y;d._Button=t;return d})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget dojo/i18n!../nls/common".split(" "),function(s,g,d,c,k,f,u,m,n,p,l,q,t,x){f("dijit-legacy-requires")&&n(0,function(){require(["dijit/layout/StackController"])});d=d("dijit.layout.StackContainer",x,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",
buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(m(this.domNode,"keydown",u.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();s.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=q.byId(g(this.id+"_selectedChild")):s.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&
a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);p.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=k.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",a.domNode,"replace"),e=a["aria-label"]||a.title||a.label;e&&c.setAttribute("aria-label",
e);k.place(b,c);a._wrapper=c;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);this._started&&(p.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){var b=s.indexOf(this.getChildren(),a);this.inherited(arguments);k.destroy(a._wrapper);delete a._wrapper;this._started&&p.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===
a&&(this.selectedChildWidget=void 0,this._started)){var c=this.getChildren();c.length&&this.selectChild(c[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,b){var c;a=q.byId(a);this.selectedChildWidget!=a&&(c=this._transition(a,this.selectedChildWidget,b),this._set("selectedChildWidget",a),p.publish(this.id+"-selectChild",a),this.persist&&g(this.id+"_selectedChild",this.selectedChildWidget.id));return l(c||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);
a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=s.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){p.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&
(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&c.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&c.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),
a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;s.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});d.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};u.extend(t,d.ChildWidgetProperties);return d})},"ScreenShotPlugin/Util":function(){define("ScreenShotPlugin/Util",["dojo/_base/declare","dojo/_base/array",
"dojo/json"],function(s,g,d){return{encode:function(c){return this._encodeGeneralSettings(c.general)},encodePhantomJSSettings:function(c){c=d.stringify({url:c.url,renderType:c.format.value,renderSettings:{zoomFactor:c.zoom.value,viewport:{width:c.width.value,height:c.height.value}}});c=c.replace(/\"([^(\")"]+)\":/g,"$1:");return"?request\x3d"+c},decode:function(c){return this._decodeGeneralSettings(c)},_encodeGeneralSettings:function(c){var d="",f={zoom:"z",trackSpacing:"p",locOver:"o",trackList:"r",
nav:"n",menu:"u",labels:"b",methylation:"m"},g;for(g in c)var m=c[g],d="methylation"===g?d+(f[g]+this._encodeBoolean(m.CG)+this._encodeBoolean(m.CHG)+this._encodeBoolean(m.CHH)):"zoom"===g||"trackSpacing"===g?d+(f[g]+m.value):d+(f[g]+this._encodeBoolean(m.value));return d},_encodeBoolean:function(c){return c?"1":"0"},_decodeBoolen:function(c){return"1"===c?!0:!1},_decodeGeneralSettings:function(c){var d={basic:{},view:{},methylation:{}},f=/z([0-9]+)/gi.exec(c);null!=f&&(d.basic.highResolutionMode=
parseInt(f[1]));f=/o([0-1])/gi.exec(c);null!=f&&(d.basic.show_overview=this._decodeBoolen(f[1]));f=/r([0-1])/gi.exec(c);null!=f&&(d.basic.show_tracklist=this._decodeBoolen(f[1]));f=/n([0-1])/gi.exec(c);null!=f&&(d.basic.show_nav=this._decodeBoolen(f[1]));f=/u([0-1])/gi.exec(c);null!=f&&(d.basic.show_menu=this._decodeBoolen(f[1]));f=/b([0-1])/gi.exec(c);null!=f&&(d.basic.show_tracklabels=this._decodeBoolen(f[1]));f=/p([0-9]+)/gi.exec(c);null!=f&&(d.view.trackPadding=parseInt(f[1]));c=/m([0-9]+)/gi.exec(c);
null!=c&&(d.methylation.CG=this._decodeBoolen(c[1].substring(0,1)),d.methylation.CHG=this._decodeBoolen(c[1].substring(1,2)),d.methylation.CHH=this._decodeBoolen(c[1].substring(2,3)));return d}}})},"JBrowse/Plugin":function(){define(["dojo/_base/declare","JBrowse/Component"],function(s,g){return s(g,{constructor:function(d){this.name=d.name;this.cssLoaded=d.cssLoaded;this._finalizeConfig(d.config)},_defaultConfig:function(){return{baseUrl:"/plugins/"+this.name}}})})},"url:dijit/layout/templates/AccordionButton.html":"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onTitleClick' class\x3d'dijitAccordionTitle' role\x3d\"presentation\"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d'titleNode,focusNode' data-dojo-attach-event\x3d'onkeydown:_onTitleKeyDown'\n\t\t\tclass\x3d'dijitAccordionTitleFocus' role\x3d\"tab\" aria-expanded\x3d\"false\"\n\t\t\x3e\x3cspan class\x3d'dijitInline dijitAccordionArrow' role\x3d\"presentation\"\x3e\x3c/span\n\t\t\x3e\x3cspan class\x3d'arrowTextUp' role\x3d\"presentation\"\x3e+\x3c/span\n\t\t\x3e\x3cspan class\x3d'arrowTextDown' role\x3d\"presentation\"\x3e-\x3c/span\n\t\t\x3e\x3cspan role\x3d\"presentation\" class\x3d\"dijitInline dijitIcon\" data-dojo-attach-point\x3d\"iconNode\"\x3e\x3c/span\x3e\n\t\t\x3cspan role\x3d\"presentation\" data-dojo-attach-point\x3d'titleTextNode, textDirNode' class\x3d'dijitAccordionText'\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n"}});
define("ScreenShotPlugin/main","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom dojo/dom-attr dijit/form/Button ./View/Dialog/ScreenShotDialog ./Util JBrowse/Plugin JBrowse/Browser".split(" "),function(s,g,d,c,k,f,u,m,n,p){return s(n,{constructor:function(c){this._defaultConfig();var d=this.browser;this.isScreenshot=!1;this.config.apiKey="a-demo-key-with-low-quota-per-ip-address";void 0!==c.config.apiKey&&(this.config.apiKey=c.config.apiKey);var g=this;d.afterMilestone("initPlugins",
function(){if(d.config.queryParams.hasOwnProperty("screenshot")){g.isScreenshot=!0;var c=m.decode(d.config.queryParams.screenshot);g._applyScreenshotConfig(c);d.afterMilestone("loadConfig",function(){g._applyMethylationConfig(c.methylation)})}});d.afterMilestone("initView",function(){function c(){(new u({requestUrl:g._getPhantomJSUrl(),browser:d})).show()}var a=d.menuBar;if(d.config.show_menu&&!1===g.isScreenshot){var b=new f({className:"screenshot-button",innerHTML:"Screen Shot",title:"take screen shot of browser",
onClick:c});a.appendChild(b.domNode)}d.setGlobalKeyboardShortcut("s",c)});d.afterMilestone("completely initialized",function(){})},_getPhantomJSUrl:function(){return"https://phantomjscloud.com/api/browser/v2/"+this.config.apiKey+"/"},_applyScreenshotConfig:function(c){g.mixin(this.browser.config,c.basic);g.mixin(this.browser.config.view,c.view)},_applyMethylationConfig:function(c){if(this.browser.plugins.hasOwnProperty("MethylationPlugin")){var d,f,k=g.clone(this.browser.trackConfigsByName);for(d in c)if(!1===
c[d]){var a={};a["show"+d]=!1;for(f in k)this._testMethylation(k[f].type)&&g.mixin(this.browser.trackConfigsByName[f],a)}}},_testMethylation:function(c){return void 0===c||null===c?!1:/\b(MethylXYPlot)/.test(c)||/\b(MethylPlot)/.test(c)},_applyTrackLabelConfig:function(){this.browser.plugins.hasOwnProperty("HideTrackLabels")&&this.browser.showTrackLabels(this.browser.config.show_tracklabels?"show":"hide")}})});
//# sourceMappingURL=main.js.map